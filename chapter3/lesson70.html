<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>选项卡的封装</title>
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
            font-size: 14px;
            -webkit-user-select: none;
            user-select: none;
        }

        ul, li{
            list-style: none;
        }

        .box{
            margin: 10px auto;
            width: 400px;
        }

        .box ul{
            /*overflow: hidden;*/ /*消除子元素浮动对父元素的影响*/
            position: relative; /*设置ul的父级参照物为box容器*/
            top: 1px;
        }

        .box ul li{
            /*为了让三个li在一排显示，要设置它们的浮动float为left！*/
            float: left;
            margin-right: 10px;
            width: 100px;
            height: 30px;
            border: 1px solid #000000;
            /*下面的意思把行高度设置为何高度一样，则默认只会有一行文字排列*/
            line-height: 30px;
            text-align: center;
            /*设置元素光标移动进去范围时的样式*/
            cursor: pointer;
        }

        /*伪类实现消除浮动*/
        .box ul:after{
            display: block;
            content: "";
            clear: both;
        }

        .box ul li.selected{
            background: lightblue;
            border-bottom-color: lightblue;
        }

        .box div{
            display: none;
            height: 150px;
            /*line-height真正的意义是让文字垂直居中*/
            line-height: 150px;
            text-align: center;
            background: lightblue;
            border: 1px solid #000000;
            /*clear: both;*/ /*清除兄弟元素间浮动的影响*/
        }

        .box div.selected{
            display: block;
        }
    </style>
</head>
<body>
<div id="box" class="box">
    <ul>
        <li class="selected">页卡一</li>
        <li>页卡二</li>
        <li>页卡三</li>
    </ul>
    <div class="selected">内容一</div>
    <div>内容二</div>
    <div>内容三</div>
</div>
<script type="text/javascript" src="../utils.js"></script>
<script type="text/javascript">
var box = document.getElementById('box'),
    oLis = box.firstElementChild.getElementsByTagName('li'),
    oDivs = utils.children(box, 'div'); //必须考虑只要box的子元素节点！

function chageTab (n) {
  for (var i=0, len=oLis.length; i < len; i++) {
    utils.removeClass(oLis[i],'selected');
    utils.removeClass(oDivs[i],'selected');
  }
  utils.addClass(oLis[n], 'selected');
  utils.addClass(oDivs[n], 'selected');
}

//for (var i=0, len=oLis.length; i < len; i++) {
//  oLis[i].onclick = function (eventTarget) {
//    var num = utils.index(this); // 获取点击的那个li到底在同辈中排行老几？
//    chageTab(num);
//  }
//}

for (var i=0, len=oLis.length; i < len; i++) {
  oLis[i].onclick = tabClickHandler;
}

function tabClickHandler () {
  var self = this;
  // 获取所点击元素li在同辈中排行老几！
  var index = utils.index(self);
  // 获取点击li的所有兄弟元素节点，然后循环删除selected样式类名
  utils.siblings(self).forEach(function (cur) {
    utils.removeClass(cur, 'selected');
  });
  // 给点击li添加选中样式类名
  utils.addClass(self, 'selected');
  // 获取与点击li在同辈排行序号相同的div元素
  var curDiv = utils.nextAll(this.parentNode)[index];
  // 循环这个div的所有兄弟元素并删除选中样式
  utils.siblings(curDiv).forEach(function (cur) {
    utils.removeClass(cur, 'selected');
  });
  // 给对应div添加选中样式
  utils.addClass(curDiv, 'selected');
  self = null;
  index = null;
}
</script>
</body>
</html>